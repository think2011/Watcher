(function(t,e){if(typeof define==="function"&&define.amd){define([],e)}else if(typeof exports==="object"){module.exports=e()}else{t.Watcher=e()}})(this,function(){var t=function(){this._events={};this._tempEvents={}};t.prototype={construct:t,on:function(t,e){this._getEvent(t).push(e);var n=this._getEvent(t,true);while(n.length){e.apply(e,n.shift())}return this},emit:function(t){var e=this._getEvent(t);var n=Array.prototype.slice.call(arguments,1);if(e.length){e.forEach(function(t){t.apply(t,n)})}else{this._getEvent(t,true).push(n)}return this},_getEvent:function(t,e){var n=e?"_tempEvents":"_events";if(!this[n][t])this[n][t]=[];return this[n][t]},off:function(t,e){var n=this._getEvent(t);if(!e){this._events[t]=[]}else{n.splice(n.indexOf(e),1)}return this}};return t});